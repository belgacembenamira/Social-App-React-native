{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport * as React from 'react';\nimport NavigationStateContext from \"./NavigationStateContext\";\nexport default function useOptionsGetters(_ref) {\n  var key = _ref.key,\n    getOptions = _ref.getOptions,\n    getState = _ref.getState;\n  var _React$useState = React.useState(0),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    numberOfChildrenListeners = _React$useState2[0],\n    setNumberOfChildrenListeners = _React$useState2[1];\n  var optionsGettersFromChild = React.useRef({});\n  var _React$useContext = React.useContext(NavigationStateContext),\n    parentAddOptionsGetter = _React$useContext.addOptionsGetter;\n  var getOptionsFromListener = React.useCallback(function () {\n    for (var _key in optionsGettersFromChild.current) {\n      if (optionsGettersFromChild.current.hasOwnProperty(_key)) {\n        var _optionsGettersFromCh, _optionsGettersFromCh2;\n        var result = (_optionsGettersFromCh = (_optionsGettersFromCh2 = optionsGettersFromChild.current)[_key]) === null || _optionsGettersFromCh === void 0 ? void 0 : _optionsGettersFromCh.call(_optionsGettersFromCh2);\n        if (result !== null) {\n          return result;\n        }\n      }\n    }\n    return null;\n  }, []);\n  var getCurrentOptions = React.useCallback(function () {\n    var _getOptions;\n    if (getState) {\n      var state = getState();\n      if (state.routes[state.index].key !== key) {\n        return null;\n      }\n    }\n    var optionsFromListener = getOptionsFromListener();\n    if (optionsFromListener !== null) {\n      return optionsFromListener;\n    }\n    return (_getOptions = getOptions === null || getOptions === void 0 ? void 0 : getOptions()) !== null && _getOptions !== void 0 ? _getOptions : undefined;\n  }, [getState, getOptionsFromListener, getOptions, key]);\n  React.useEffect(function () {\n    return parentAddOptionsGetter === null || parentAddOptionsGetter === void 0 ? void 0 : parentAddOptionsGetter(key, getCurrentOptions);\n  }, [getCurrentOptions, parentAddOptionsGetter, key]);\n  var addOptionsGetter = React.useCallback(function (key, getter) {\n    optionsGettersFromChild.current[key] = getter;\n    setNumberOfChildrenListeners(function (prev) {\n      return prev + 1;\n    });\n    return function () {\n      setNumberOfChildrenListeners(function (prev) {\n        return prev - 1;\n      });\n      delete optionsGettersFromChild.current[key];\n    };\n  }, []);\n  var hasAnyChildListener = React.useMemo(function () {\n    return numberOfChildrenListeners > 0;\n  }, [numberOfChildrenListeners]);\n  return {\n    addOptionsGetter: addOptionsGetter,\n    getCurrentOptions: getCurrentOptions,\n    hasAnyChildListener: hasAnyChildListener\n  };\n}","map":{"version":3,"names":["React","NavigationStateContext","useOptionsGetters","_ref","key","getOptions","getState","_React$useState","useState","_React$useState2","_slicedToArray","numberOfChildrenListeners","setNumberOfChildrenListeners","optionsGettersFromChild","useRef","_React$useContext","useContext","parentAddOptionsGetter","addOptionsGetter","getOptionsFromListener","useCallback","current","hasOwnProperty","_optionsGettersFromCh","_optionsGettersFromCh2","result","call","getCurrentOptions","_getOptions","state","routes","index","optionsFromListener","undefined","useEffect","getter","prev","hasAnyChildListener","useMemo"],"sources":["C:\\Users\\belgacem\\OneDrive\\Bureau\\projet02\\SocialApp-React-Native\\node_modules\\@react-navigation\\core\\lib\\module\\useOptionsGetters.tsx"],"sourcesContent":["import * as React from 'react';\nimport NavigationStateContext from './NavigationStateContext';\nimport type { NavigationState } from '@react-navigation/routers';\n\nexport default function useOptionsGetters({\n  key,\n  getOptions,\n  getState,\n}: {\n  key?: string;\n  getOptions?: () => object | undefined;\n  getState?: () => NavigationState;\n}) {\n  let [\n    numberOfChildrenListeners,\n    setNumberOfChildrenListeners,\n  ] = React.useState(0);\n  const optionsGettersFromChild = React.useRef<\n    Record<string, () => object | undefined | null>\n  >({});\n\n  const { addOptionsGetter: parentAddOptionsGetter } = React.useContext(\n    NavigationStateContext\n  );\n\n  const getOptionsFromListener = React.useCallback(() => {\n    for (let key in optionsGettersFromChild.current) {\n      if (optionsGettersFromChild.current.hasOwnProperty(key)) {\n        const result = optionsGettersFromChild.current[key]?.();\n        // null means unfocused route\n        if (result !== null) {\n          return result;\n        }\n      }\n    }\n    return null;\n  }, []);\n\n  const getCurrentOptions = React.useCallback(() => {\n    if (getState) {\n      const state = getState();\n      if (state.routes[state.index].key !== key) {\n        // null means unfocused route\n        return null;\n      }\n    }\n\n    const optionsFromListener = getOptionsFromListener();\n    if (optionsFromListener !== null) {\n      return optionsFromListener;\n    }\n    return getOptions?.() ?? undefined;\n  }, [getState, getOptionsFromListener, getOptions, key]);\n\n  React.useEffect(() => {\n    return parentAddOptionsGetter?.(key!, getCurrentOptions);\n  }, [getCurrentOptions, parentAddOptionsGetter, key]);\n\n  const addOptionsGetter = React.useCallback(\n    (key: string, getter: () => object | undefined | null) => {\n      optionsGettersFromChild.current[key] = getter;\n      setNumberOfChildrenListeners((prev) => prev + 1);\n\n      return () => {\n        setNumberOfChildrenListeners((prev) => prev - 1);\n        // eslint-disable-next-line @typescript-eslint/no-dynamic-delete\n        delete optionsGettersFromChild.current[key];\n      };\n    },\n    []\n  );\n\n  const hasAnyChildListener = React.useMemo(\n    () => numberOfChildrenListeners > 0,\n    [numberOfChildrenListeners]\n  );\n\n  return {\n    addOptionsGetter,\n    getCurrentOptions,\n    hasAnyChildListener,\n  };\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}